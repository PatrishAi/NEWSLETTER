<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mój pachnący newsletter</title>

  <!-- MailerLite Universal (Twoje konto) -->
  <script>
    (function(w,d,e,u,f,l,n){
      w[f]=w[f]||function(){(w[f].q=w[f].q||[]).push(arguments);};
      l=d.createElement(e); l.async=1; l.src=u;
      n=d.getElementsByTagName(e)[0]; n.parentNode.insertBefore(l,n);
    })(window, document, 'script', 'https://assets.mailerlite.com/js/universal.js', 'ml');

    /* ID konta ML – Twoje */
    ml('account', '2044515');

    /* Wyświetl formularz od razu (kolejkuje się nawet przed pełnym załadowaniem) */
    ml('show', 'UWMDRa', true);
  </script>

  <style>
    html,body{height:100%}
    body{
      margin:0;
      background:#f7dff0;      /* delikatny róż */
      font-family:system-ui, Arial, sans-serif;
    }

    /* Pasek z informacją o F5 – dyskretny, przyklejony na dole */
    .sticky-note{
      position:fixed; left:50%; transform:translateX(-50%);
      bottom:14px; padding:10px 14px; border-radius:10px;
      background:rgba(123,43,115,0.14); color:#3a2b36; 
      backdrop-filter:saturate(140%) blur(2px);
      font-size:14px; line-height:1.25; user-select:none; z-index:2147483647;
      box-shadow:0 4px 16px rgba(0,0,0,.08);
    }
    .sticky-note b{color:#7b2b73}
  </style>
</head>
<body>

  <!-- Minimalna, czysta strona – popup otwiera się sam -->
  <div class="sticky-note">
    Jeśli okienko zniknie, naciśnij <b>F5</b> (twarde odświeżenie).
  </div>

  <script>
    /* Konfiguracja formularza */
    const FORM_ID = 'UWMDRa';

    /* Funkcja bezpiecznego pokazywania pop‑upu */
    function showPopupSafe(){
      try { if (typeof ml === 'function') ml('show', FORM_ID, true); } catch(e){}
    }

    /* 1) Dodatkowe próby pokazania – gdyby sieć była wolna */
    (function ensurePopup(){
      let tries = 0;
      function again(){
        showPopupSafe();
        if (++tries < 12) setTimeout(again, 400); // ~5 sekund „strażnika”
      }
      setTimeout(again, 500);
    })();

    /* 2) Zablokuj zamykanie kliknięciem w tło (overlay) i Esc.
          Obserwujemy DOM, bo ML wstrzykuje elementy dynamicznie. */
    (function hardenBehavior(){
      // Blokada ESC i natychmiastowe przywracanie
      document.addEventListener('keydown', (e)=>{
        if (e.key === 'Escape') {
          e.preventDefault();
          e.stopPropagation();
          setTimeout(showPopupSafe, 10);
        }
      }, true);

      // Unieszkodliw kliknięcia w nakładkę + przywracanie po kliknięciu gdziekolwiek
      const stopOverlay = (el)=>{
        if (!el) return;
        el.style.pointerEvents = 'none'; // klik w tło nic nie zrobi
      };

      const mo = new MutationObserver(()=>{
        // typowe klasy overlay/backdrop w komponentach ML – łapiemy szeroko
        document.querySelectorAll(`
          [class*="overlay"],
          [class*="backdrop"],
          .ml-overlay, .ml-popup-overlay, .ml-backdrop
        `).forEach(stopOverlay);
      });
      mo.observe(document.documentElement, {childList:true, subtree:true});

      // Jeśli ktoś kliknie w dokument i popup zniknie – natychmiast przywróć
      document.addEventListener('click', ()=>{
        setTimeout(showPopupSafe, 30);
      }, true);
    })();
  </script>
</body>
</html>
